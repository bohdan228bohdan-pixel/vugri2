{% extends 'base.html' %}
{% load static %}

{% block title %}VugriUkraine ‚Äî –°–≤—ñ–∂–∏–π –≤—É–≥–æ—Ä{% endblock %}

{% block head_extra %}
<style>
/* Dark homepage tweaks ‚Äî —Ä–æ–±–∏–º–æ —Å–∞–π—Ç –¥—ñ–π—Å–Ω–æ —Ç–µ–º–Ω–∏–º, —è–∫ –Ω–∞ —Å–∫—Ä–∏–Ω—ñ */
:root {
  --page-bg: #050505;
  --panel-bg: rgba(255,255,255,0.02);
  --muted-2: #9aa0a6;
  --accent: #e75b2e;
  --accent-dark: #cc4a20;
  --glass: rgba(255,255,255,0.03);
}

body { background: var(--page-bg); }

/* HERO / banner */
.hero {
  position: relative;
  min-height: 560px;
  background-size: cover;
  background-position: center;
  display:flex;
  align-items:center;
  color: #ffffff;
  overflow:hidden;
  border-bottom: 1px solid rgba(255,255,255,0.03);
}

.hero::after{
  content:"";
  position:absolute;
  inset:0;
  /* —Å–∏–ª—å–Ω–∏–π —Ç–µ–º–Ω–∏–π –æ–≤–µ—Ä–ª–µ–π –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç—É */
  background: linear-gradient(90deg, rgba(0,0,0,0.88) 0%, rgba(0,0,0,0.62) 35%, rgba(0,0,0,0.28) 65%, rgba(0,0,0,0.06) 100%);
  z-index:1;
  pointer-events:none;
}

.hero-inner {
  position:relative;
  z-index:2;
  max-width:1280px;
  margin:0 auto;
  padding:64px 24px;
  display:flex;
  gap:36px;
  align-items:center;
  box-sizing:border-box;
}

/* left column */
.hero-left { flex:1; max-width:720px; }
.hero-left .logo { display:flex; align-items:center; gap:12px; margin-bottom:18px; }
.hero-left h1 {
  margin:0 0 12px;
  font-size:56px;
  line-height:1.02;
  font-weight:900;
  letter-spacing:1.6px;
  color: #fff;
}
.hero-left p.lead {
  margin:0 0 18px;
  color: var(--muted-2);
  font-size:18px;
  max-width:680px;
}

/* CTA buttons */
.cta-row { display:flex; gap:12px; flex-wrap:wrap; margin-top:8px; }
.btn {
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:12px 18px;
  border-radius:10px;
  font-weight:800;
  text-decoration:none;
  cursor:pointer;
}
.btn-primary { background: linear-gradient(90deg,var(--accent),var(--accent-dark)); color:#fff; border:none; }
.btn-outline { background:transparent; border:1px solid rgba(255,255,255,0.06); color:#fff; }

/* right column ‚Äî product card */
.hero-right { flex:0 0 440px; }
.product-card {
  width:100%;
  background: var(--panel-bg);
  padding:16px;
  border-radius:12px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.6);
  border:1px solid rgba(255,255,255,0.03);
  display:flex;
  flex-direction:column;
  align-items:center;
}
.product-card img { width:100%; height:260px; object-fit:cover; border-radius:10px; display:block; background:#0b0b0b; }
.product-card h3 { margin:12px 0 6px; color:#fff; font-weight:900; }
.product-card p { margin:0 0 12px; color:var(--muted-2); text-align:center; }

/* hits carousel */
.hits-section { max-width:1280px; margin:44px auto; padding:0 24px; color:var(--muted-2); }
.hits-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:18px; }
.hits-title { font-size:20px; font-weight:900; color:#fff; }

.hits-track { display:flex; gap:18px; overflow-x:auto; padding-bottom:8px; scroll-behavior:smooth; }
.hits-track::-webkit-scrollbar { height:8px; }
.hits-track::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.06); border-radius:6px; }

.card-mini { min-width:200px; background: var(--panel-bg); border-radius:10px; padding:10px; color:#fff; position:relative; text-align:center; }
.card-mini img { width:100%; height:140px; object-fit:cover; border-radius:8px; display:block; }
.card-mini .name { font-weight:800; margin-top:10px; min-height:40px; }
.card-mini .price { color:var(--muted-2); margin-top:6px; }

/* badge */
.badge-hit { position:absolute; left:10px; top:10px; background:#8fd19a; color:#07200b; font-weight:900; padding:6px 8px; border-radius:6px; font-size:12px; }

/* about */
.about { max-width:1100px; margin:36px auto; padding:0 24px; color:var(--muted-2); line-height:1.7; text-align:center; }

/* dark footer spacer for aesthetic like in screenshot (optional) */
.footer-spacer { height:80px; background:linear-gradient(180deg,transparent,rgba(0,0,0,0.6)); }

/* responsive */
@media (max-width:980px) {
  .hero-inner { flex-direction:column; padding:32px 16px; }
  .hero-left h1 { font-size:36px; }
  .hero-right { width:100%; }
  .card-mini { min-width:160px; }
}
</style>
{% endblock %}

{% block content %}
  <!-- HERO: —Ç–µ–º–Ω–∏–π –±–∞–Ω–µ—Ä, –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –±–µ—Ä–µ–º–æ /static/images/png/banner.png -->
  <section class="hero" style="background-image:url('{% static 'images/png/banner.png' %}')">
    <div class="hero-inner">
      <div class="hero-left">
        <div class="logo">
          <img src="{% static 'images/png/logo.png' %}" alt="logo" style="height:56px;display:block">
          <div style="font-weight:900;color:#fff;font-size:18px">VugriUa</div>
        </div>

        <h1>–Ü–∫—Ä–∞, –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∏ —Ç–∞ –¥–µ–ª—ñ–∫–∞—Ç–µ—Å–∏</h1>
        <p class="lead">–ü—Ä–µ–º—ñ–∞–ª—å–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç–∏, –∫–æ–Ω—Ç—Ä–æ–ª—å —Ö–æ–ª–æ–¥–æ–≤–æ–≥–æ –ª–∞–Ω—Ü—é–≥–∞ —ñ —à–≤–∏–¥–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –£–∫—Ä–∞—ó–Ω—ñ. –ó–∞–º–æ–≤–ª—è–π –æ–ø—Ç–æ–º —Ç–∞ –≤ —Ä–æ–∑–¥—Ä—ñ–± ‚Äî –≤—Å–µ –ø—Ä–æ—Å—Ç–æ —Ç–∞ –∑—Ä–æ–∑—É–º—ñ–ª–æ.</p>

        <div class="cta-row">
          <a href="{% url 'products' %}" class="btn btn-primary">–ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤</a>
          <a href="{% url 'products' %}?filter=hits" class="btn btn-outline">–•—ñ—Ç–∏ –ø—Ä–æ–¥–∞–∂—É</a>
          <a href="{% url 'contact' %}" class="btn btn-outline">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
        </div>

        <div style="margin-top:16px;color:var(--muted-2);font-size:15px;max-width:680px;">
          –®–≤–∏–¥–∫–∞ –ø—ñ–¥–∫–∞–∑–∫–∞: –Ω–∞—Ç–∏—Å–Ω–∏ ¬´–•—ñ—Ç–∏ –ø—Ä–æ–¥–∞–∂—É¬ª —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –Ω–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à—ñ —Ç–æ–≤–∞—Ä–∏ –∞–±–æ –ø—Ä–æ–∫—Ä—É—Ç–∏ –¥–∞–ª—ñ –¥–ª—è –±–ª–æ–∫—É —Å—Ç–∞—Ç–µ–π —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π.
        </div>
      </div>

      <div class="hero-right">
        <div class="product-card" aria-hidden="false">
          <img src="{% static 'images/png/vugor.png' %}" alt="–°–≤—ñ–∂–∏–π –≤—É–≥–æ—Ä">
          <h3>–°–≤—ñ–∂–∏–π –≤—É–≥–æ—Ä</h3>
          <p>–¶—ñ–Ω–∞ –≤—ñ–¥ 250 –≥—Ä–Ω / 100–≥ ‚Äî –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –æ–ø—Ç–æ–º —Ç–∞ –≤ —Ä–æ–∑–¥—Ä—ñ–±.</p>

          <div class="product-actions" style="width:100%;display:flex;gap:8px;">
            <a href="{% url 'product_details' 1 %}?buy=1" class="btn btn-primary" style="flex:1">–ö—É–ø–∏—Ç–∏</a>
            <a href="{% url 'cart' %}" class="btn btn-outline" style="flex:1">–ö–æ—à–∏–∫</a>
          </div>

          <div style="width:100%;margin-top:10px">
            <a href="{% url 'favorites' %}" class="btn btn-outline" style="width:100%;display:block">–û–±—Ä–∞–Ω–µ</a>
          </div>

          {% if user.is_authenticated %}
            {% if has_chats %}
              <p style="margin:12px 0;">
                <a class="btn btn-primary" href="{% url 'my_conversations' %}">
                  üí¨ –ú–æ—ó —á–∞—Ç–∏ ({{ chats_count }})
                </a>
              </p>
            {% else %}
              <p style="margin:12px 0;color:var(--muted-2);">–£ –≤–∞—Å —â–µ –Ω–µ–º–∞—î —á–∞—Ç—ñ–≤ ‚Äî –∑—Ä–æ–±—ñ—Ç—å –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è, —â–æ–± –ø–æ—á–∞—Ç–∏ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è –∑ –ø—Ä–æ–¥–∞–≤—Ü–µ–º.</p>
            {% endif %}
          {% else %}
            <p style="margin:12px 0;">
              <a class="btn btn-outline" href="{% url 'login' %}?next={% url 'my_conversations' %}">–£–≤—ñ–π—Ç–∏, —â–æ–± –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è —á–∞—Ç–∏</a>
            </p>
          {% endif %}
        </div>
      </div>
    </div>
  </section>

  <!-- –•—ñ—Ç–∏ –ø—Ä–æ–¥–∞–∂—É: —Ç–µ–º–Ω–∏–π –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∏–π —Ç—Ä–µ–∫ -->
  <section class="hits-section" aria-label="–•—ñ—Ç–∏ –ø—Ä–æ–¥–∞–∂—É">
    <div class="hits-header">
      <div class="hits-title">–•—ñ—Ç–∏ –ø—Ä–æ–¥–∞–∂—É</div>
      <div>
        <a href="{% url 'products' %}?filter=hits" class="btn btn-outline">–í—Å—ñ —Ö—ñ—Ç–∏</a>
      </div>
    </div>

    <div class="hits-track" id="hitsTrack" tabindex="0" aria-label="–°–ø–∏—Å–æ–∫ —Ö—ñ—Ç—ñ–≤">
      {% for p in products|slice:":10" %}
        <article class="card-mini" data-url="{% url 'product_details' p.id %}">
          {% if forloop.counter0 < 6 %}
            <div class="badge-hit">–•–Ü–¢</div>
          {% endif %}
          <a href="{% url 'product_details' p.id %}" style="color:inherit;text-decoration:none;display:block">
            {% if p.image %}
              <img src="{{ p.image.url }}" alt="{{ p.name }}">
            {% else %}
              <img src="{% static 'images/png/placeholder.png' %}" alt="{{ p.name }}">
            {% endif %}
            <div class="name">{{ p.name }}</div>
            <div class="price">{{ p.price_per_100g }} –≥—Ä–Ω / 100–≥</div>
          </a>
        </article>
      {% empty %}
        <div style="color:var(--muted-2)">–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î —Ç–æ–≤–∞—Ä—ñ–≤.</div>
      {% endfor %}
    </div>
  </section>

  <!-- –ü—Ä–æ –Ω–∞—Å / –ø—Ä–æ–º–æ (—Ç–µ–º–Ω–æ, —Ü–µ–Ω—Ç—Ä–æ–≤–∞–Ω–æ —è–∫ –Ω–∞ —Å–∫—Ä–∏–Ω—ñ) -->
  <section class="about" aria-label="–ü—Ä–æ –Ω–∞—Å">
    <h2 style="color:#fff;margin-bottom:8px">VugriUkraine</h2>
    <p style="max-width:900px;margin:0 auto 18px;color:var(--muted-2)">
      VugriUkraine ‚Äî —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω —ñ–∫—Ä–∏, —Ä–∏–±–∏ —Ç–∞ –¥–µ–ª—ñ–∫–∞—Ç–µ—Å—ñ–≤. –ú–∏ –¥–±–∞–π–ª–∏–≤–æ —É–ø–∞–∫—É—î–º–æ –≤–∞—à–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —ñ –¥–æ—Å—Ç–∞–≤–∏–º–æ —Å–≤—ñ–∂–∏–º.
    </p>

    <div style="max-width:1100px;margin:18px auto;display:flex;gap:18px;flex-wrap:wrap;align-items:center;justify-content:center">
      <img src="{% static 'images/png/woman.png' %}" alt="–ñ—ñ–Ω–∫–∞" style="max-width:420px;border-radius:12px;box-shadow:0 12px 40px rgba(0,0,0,0.6)">
      <div style="min-width:260px;max-width:560px;color:var(--muted-2);line-height:1.6;text-align:left">
        <h3 style="color:#fff;margin-top:0">–ß–æ–º—É –æ–±–∏—Ä–∞—é—Ç—å –Ω–∞—Å</h3>
        <ul style="padding-left:18px;margin-top:8px">
          <li>–ü—Ä–µ–º—ñ–∞–ª—å–Ω—ñ –ø–∞—Ä—Ç—ñ—ó —ñ–∫—Ä–∏ —Ç–∞ –¥–µ–ª—ñ–∫–∞—Ç–µ—Å—ñ–≤</li>
          <li>–û—Ö–æ–ª–æ–¥–∂–µ–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –≤—Å—ñ–π –£–∫—Ä–∞—ó–Ω—ñ</li>
          <li>–ì–∞—Ä–∞–Ω—Ç—ñ—è —è–∫–æ—Å—Ç—ñ —Ç–∞ –ø—Ä–æ–∑–æ—Ä—ñ —É–º–æ–≤–∏</li>
        </ul>

        <div style="margin-top:12px">
          <a href="{% url 'products' %}" class="btn btn-primary">–ü–æ—á–∞—Ç–∏ –ø–æ–∫—É–ø–∫–∏</a>
          <a href="{% url 'contact' %}" class="btn btn-outline" style="margin-left:8px">–ó–≤'—è–∑–∞—Ç–∏—Å—è</a>
        </div>
      </div>
    </div>
  </section>

  <div class="footer-spacer" aria-hidden="true"></div>

  <!-- Inline JS: drag scroll, –∞–≤—Ç–æ—Å–∫—Ä–æ–ª —ñ –ø—Ä–æ—Å—Ç—ñ UX enhancement -->
  <script>
  (function(){
    const track = document.getElementById('hitsTrack');
    if (!track) return;

    // Drag-to-scroll
    let isDown = false, startX = 0, scrollLeft = 0;
    track.addEventListener('pointerdown', function(e){
      isDown = true;
      track.setPointerCapture(e.pointerId);
      startX = e.clientX;
      scrollLeft = track.scrollLeft;
      track.style.cursor = 'grabbing';
    });
    track.addEventListener('pointermove', function(e){
      if (!isDown) return;
      const x = e.clientX;
      const walk = (startX - x);
      track.scrollLeft = scrollLeft + walk;
    });
    track.addEventListener('pointerup', function(e){
      isDown = false;
      try { track.releasePointerCapture(e.pointerId); } catch(e){}
      track.style.cursor = '';
    });
    track.addEventListener('pointercancel', function(){ isDown = false; track.style.cursor = ''; });

    // Autoscroll (delicate)
    let pause = false;
    track.addEventListener('mouseenter', () => pause = true);
    track.addEventListener('mouseleave', () => pause = false);
    setInterval(function(){
      if (!pause && track.scrollWidth > track.clientWidth) {
        track.scrollBy({ left: Math.round(track.clientWidth * 0.4), behavior: 'smooth' });
        if (track.scrollLeft + track.clientWidth >= track.scrollWidth - 10) {
          setTimeout(()=>{ track.scrollTo({ left:0, behavior:'smooth' }); }, 800);
        }
      }
    }, 4200);

    // Click on card (dataset url) as fallback
    track.addEventListener('click', function(e){
      let el = e.target;
      while (el && el !== track) {
        if (el.matches && el.matches('.card-mini') && el.dataset && el.dataset.url) {
          window.location = el.dataset.url;
          return;
        }
        el = el.parentNode;
      }
    });

    // Tiny hover animation for primary buttons
    document.querySelectorAll('.btn.btn-primary').forEach(btn=>{
      btn.addEventListener('mouseenter', ()=> btn.style.transform = 'translateY(-3px)');
      btn.addEventListener('mouseleave', ()=> btn.style.transform = '');
    });
  })();
  </script>
{% endblock %}—ñ